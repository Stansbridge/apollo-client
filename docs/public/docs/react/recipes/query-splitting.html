<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Query Splitting | Apollo Client Guide</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.apollographql.com/docs/react">
    <meta property="og:title" content="Query Splitting | Apollo Client Guide">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@apollographql">
    <meta name="twitter:title" content="Query Splitting | Apollo Client Guide">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/docs/react/style/style.css">
  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      
      <a class="logo-wrapper" href="http://dev.apollodata.com/" title="Apollo Developers"  >
        <img src="../images/logo-apollo-space-left.svg" alt="Apollo" class="logo"/><img src="../images/logo-apollo-subbrands-developers-space.svg" class="logo-subbrand" alt="Developers"/>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/react"  >
          <span>React</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/angular2"  >
          <span>Angular</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/ios"  >
          <span>iOS</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/android"  >
          <span>Android</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/core"  >
          <span>Vanilla JS</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false separator">
        <a class="link" href="http://dev.apollodata.com/tools"  >
          <span>Server</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://medium.com/apollo-stack" target=_new >
          <span>Blog</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/community"  >
          <span>Community</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="../http:/dev.apollodata.com/" title="Apollo"  >
        <span>Apollo Developers</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/react"  >
          <span>React</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/angular2"  >
          <span>Angular</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/ios"  >
          <span>iOS</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/android"  >
          <span>Android</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/core"  >
          <span>Vanilla JS</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/tools"  >
          <span>Server</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="https://medium.com/apollo-stack" target=_new >
          <span>Blog</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/community"  >
          <span>Community</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo Client Guide</span>
      
    </div>

    

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="../index.html" class="sidebar-link ">
                  <span>Apollo Client</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/integrations.html" class="sidebar-link ">
                  <span>View Integrations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/setup.html" class="sidebar-link ">
                  <span>Setup and options</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/network-layer.html" class="sidebar-link ">
                  <span>Network layer</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/error-handling.html" class="sidebar-link ">
                  <span>Error Handling</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/fragments.html" class="sidebar-link ">
                  <span>Using Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../basics/subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Features</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="../features/changelog.html" class="sidebar-link ">
                  <span>Changelog</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../features/caching.html" class="sidebar-link ">
                  <span>Direct Cache Access</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../features/developer-tooling.html" class="sidebar-link ">
                  <span>Developer tools</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../features/network-customization.html" class="sidebar-link ">
                  <span></span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../features/optimistic-ui.html" class="sidebar-link ">
                  <span>Optimistic UI</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../features/react-native.html" class="sidebar-link ">
                  <span>Integrating with React Native</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="../features/static-typing.html" class="sidebar-link ">
                  <span>Using TypeScript and Flow</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Recipes</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="authentication.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="babel.html" class="sidebar-link ">
                  <span>Precompilation with babel</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="meteor.html" class="sidebar-link ">
                  <span>Meteor</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="pagination.html" class="sidebar-link ">
                  <span>Pagination</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="prefetching.html" class="sidebar-link ">
                  <span>Prefetching data</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>Query Splitting</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-side-rendering.html" class="sidebar-link ">
                  <span>Server Side Rendering</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="simple-example.html" class="sidebar-link ">
                  <span>Small Example: Snack</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="webpack.html" class="sidebar-link ">
                  <span>Webpack loader</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Reference</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="../reference/index.html" class="sidebar-link ">
                  <span>Title</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Query Splitting</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/apollographql/apollo-client/tree/master/docs/source/recipes/query-splitting.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>Prefetching is an easy way to make your applications UI feel faster. You can use mouse events to predict the data that could be needed.<br>This is powerful and works perfectly on the browser, but can not be applied to a mobile device.</p>
<p>One solution for improving the UI experience would be the usage of fragments to preload more data in a query, but loading huge amounts of data (that you probably never show to the user) is expensive.</p>
<p>Another solution would be to split huge queries into two smaller queries:</p>
<ul>
<li>The first one could load data which is already in the store. This means that it can be displayed instantly.</li>
<li>The second query could load data which is not in the store yet and must be fetched from the server first.</li>
</ul>
<p>This solution gives you the benefit of not fetching too much data, as well as the possibility to show some part of the views data before the server responds.</p>
<p>Lets say you have the following schema:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">type Series &#123;</div><div class="line">  id: Int!</div><div class="line">  title: String!</div><div class="line">  description: String!</div><div class="line">  episodes: [Episode]!</div><div class="line">  cover: String!</div><div class="line">&#125;</div><div class="line"></div><div class="line">type Episode &#123;</div><div class="line">  id: Int!</div><div class="line">  title: String!</div><div class="line">  cover: String!</div><div class="line">&#125;</div><div class="line"></div><div class="line">type Query &#123;</div><div class="line">  series: [Series!]!</div><div class="line">  oneSeries(id: Int): Series</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>And you have two Views:</p>
<ol>
<li>Series Overview: List of all Series with their description and cover</li>
<li>Series DetailView: Detail View of a Series with its description, cover and a list of episodes</li>
</ol>
<p>The query for the Series Overview would look like the following:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">query seriesOverviewData &#123;</div><div class="line">  series &#123;</div><div class="line">    id</div><div class="line">    title</div><div class="line">    description</div><div class="line">    cover</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The queries for the Series DetailView would look like this:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">query seriesDetailData($seriesId: Int!) &#123;</div><div class="line">  oneSeries(id: $seriesId) &#123;</div><div class="line">    id</div><div class="line">    title</div><div class="line">    description</div><div class="line">    cover</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">query seriesEpisodes($seriesId: Int!) &#123;</div><div class="line">  oneSeries(id: $seriesId) &#123;</div><div class="line">    id</div><div class="line">    episodes &#123;</div><div class="line">      id</div><div class="line">      title</div><div class="line">      cover</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>By adding a <a href="cache-updates.html#cacheRedirect">custom resolver</a> for the <code>oneSeries</code> field (and having dataIdFromObject function which normalizes the cache), the data can be resolved instantly from the store without a server round trip.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ApolloClient, &#123; toIdValue &#125; <span class="keyword">from</span> <span class="string">'apollo-client'</span></div><div class="line"></div><div class="line"><span class="comment">// ... your NetworkInterface declaration</span></div><div class="line"><span class="comment">// and also VERY important: Your dataIdFromObject declaration</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> ApolloClient(&#123;</div><div class="line">  networkInterface,</div><div class="line">  customResolvers: &#123;</div><div class="line">    Query: &#123;</div><div class="line">      oneSeries: <span class="function">(<span class="params">_, &#123; id &#125;</span>) =&gt;</span> toIdValue(dataIdFromObject(&#123; <span class="attr">__typename</span>: <span class="string">'Series'</span>, id &#125;)),</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line">  dataIdFromObject,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>A component for the second view that implements the two queries could look like this:<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; PropTypes, &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; gql, graphql, compose, &#125; <span class="keyword">from</span> <span class="string">'react-apollo'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> QUERY_SERIES_DETAIL_VIEW = gql<span class="string">`</span></div><div class="line"><span class="string">  query seriesDetailData($seriesId: Int!) &#123;</span></div><div class="line"><span class="string">    oneSeries(id: $seriesId) &#123;</span></div><div class="line"><span class="string">      id</span></div><div class="line"><span class="string">      title</span></div><div class="line"><span class="string">      description</span></div><div class="line"><span class="string">      cover</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">  &#125;</span></div><div class="line"><span class="string">`</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> QUERY_SERIES_EPISODES = gql<span class="string">`</span></div><div class="line"><span class="string">  query seriesEpisodes($seriesId: Int!) &#123;</span></div><div class="line"><span class="string">    oneSeries(id: $seriesId) &#123;</span></div><div class="line"><span class="string">      id</span></div><div class="line"><span class="string">      episodes &#123;</span></div><div class="line"><span class="string">        id</span></div><div class="line"><span class="string">        title</span></div><div class="line"><span class="string">        cover</span></div><div class="line"><span class="string">      &#125;</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">  &#125;</span></div><div class="line"><span class="string">`</span></div><div class="line"><span class="keyword">const</span> options = <span class="function">(<span class="params">&#123; seriesId, &#125;</span>) =&gt;</span> (&#123; <span class="attr">variables</span>: &#123; seriesId, &#125;, &#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> withSeriesDetailData = graphql(QUERY_SERIES_DETAIL_VIEW, &#123;</div><div class="line">  name: <span class="string">`seriesDetailData`</span>,</div><div class="line">  options,</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> withSeriesEpisodes = graphql(QUERY_SERIES_EPISODES, &#123;</div><div class="line">  name: <span class="string">`seriesWithEpisodesData`</span>,</div><div class="line">  options,</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> withData = compose(</div><div class="line">  withSeriesDetailData,</div><div class="line">  withSeriesEpisodes</div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SeriesDetailView</span>(<span class="params">&#123; </span></span></div><div class="line"><span class="function"><span class="params">  seriesDetailData: &#123;</span></span></div><div class="line"><span class="function"><span class="params">    loading: seriesLoading,</span></span></div><div class="line"><span class="function"><span class="params">    oneSeries,</span></span></div><div class="line"><span class="function"><span class="params">  &#125;,</span></span></div><div class="line"><span class="function"><span class="params">  seriesWithEpisodesData: &#123; </span></span></div><div class="line"><span class="function"><span class="params">    loading: episodesLoading,</span></span></div><div class="line"><span class="function"><span class="params">    oneSeries: &#123; episodes &#125; = &#123;&#125;,</span></span></div><div class="line"><span class="function"><span class="params">  &#125;</span></span></div><div class="line"><span class="function"><span class="params">&#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;h1&gt;&#123;seriesLoading ? <span class="string">`Loading...`</span> : oneSeries.title&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">      &lt;img src=&#123;seriesLoading ? `/</span>dummy.jpg<span class="string">` : oneSeries.cover&#125; /&gt;</span></div><div class="line"><span class="string">      &lt;h2&gt;Episodes&lt;/h2&gt;</span></div><div class="line"><span class="string">      &lt;ul&gt;</span></div><div class="line"><span class="string">      &#123;episodesLoading ? &lt;li&gt;Loading...&lt;/li&gt; : episodes.map(episode =&gt; (</span></div><div class="line"><span class="string">        &lt;li key=&#123;episode.id&#125;&gt;</span></div><div class="line"><span class="string">          &lt;img src=&#123;episode.cover&#125; /&gt;</span></div><div class="line"><span class="string">          &lt;a href=&#123;`</span>/episode/$&#123;episode.id&#125;<span class="string">`&#125;&gt;&#123;episode.title&#125;&lt;/a&gt;</span></div><div class="line"><span class="string">        &lt;/li&gt;</span></div><div class="line"><span class="string">      ))&#125;</span></div><div class="line"><span class="string">      &lt;/ul&gt;</span></div><div class="line"><span class="string">    &lt;/div&gt;</span></div><div class="line"><span class="string">  )</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">const SeriesDetailViewWithData = withData(SeriesDetailView)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">SeriesDetailViewWithData.propTypes = &#123;</span></div><div class="line"><span class="string">  seriesId: PropTypes.number.isRequired,</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">export default SeriesDetailView</span></div></pre></td></tr></table></figure></p>
<p>Unfortunately if the user would now visit the second view without ever visiting the first view this would result in two network requests (since the data for the first query is not in the store yet). By using a <a href="/core/apollo-client-api.html#BatchedNetworkInterface"><code>BatchedNetworkInterface</code></a> those two queries can be send to the server in one network request.</p>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="prefetching.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Prefetching data
        </a>
      
      
        <a class="link primary next"
          href="server-side-rendering.html">
          <span class="subtitle-pagination">Next</span>
          Server Side Rendering
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/apollographql/apollo-client/tree/master/docs/source/recipes/query-splitting.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/docs/react/script/smooth-scroll.min.js"></script>
    <script src="/docs/react/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();

     

      
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PNFDVBB');
      

      
        // Segment Tracking
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page()
        }}();
      

      // search box
      

      
    </script>
  </body>
</html>
